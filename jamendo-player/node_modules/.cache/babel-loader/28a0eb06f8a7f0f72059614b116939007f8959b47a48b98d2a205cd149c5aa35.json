{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import GenreCard from'../components/GenreCard';import AudioPlayer from'../components/AudioPlayer';import{getTracksByGenre,searchTracks}from'../api';import'../styles/Search.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const genres=[\"pop\",\"rock\",\"jazz\",\"hiphop\",\"electronic\",\"classical\",\"reggae\"];const Search=()=>{const[tracks,setTracks]=useState([]);const[selectedTrack,setSelectedTrack]=useState(null);const[searchQuery,setSearchQuery]=useState('');const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState('');const location=useLocation();const navigate=useNavigate();const handleSearch=async query=>{if(!query.trim()){setTracks([]);return;}setIsLoading(true);setError('');try{const result=await searchTracks(query);setTracks(result);}catch(error){setError('Failed to search tracks: '+error.message);}finally{setIsLoading(false);}};const handleGenreClick=async genre=>{setIsLoading(true);setError('');try{const result=await getTracksByGenre(genre);setTracks(result);}catch(error){setError('Failed to fetch tracks: '+error.message);}finally{setIsLoading(false);}};useEffect(()=>{const query=new URLSearchParams(location.search).get('query');if(query){setSearchQuery(query);handleSearch(query);}},[location]);return/*#__PURE__*/_jsxs(\"div\",{className:\"search-page with-audio-player\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-header\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for songs, artists...\",value:searchQuery,onChange:e=>{setSearchQuery(e.target.value);handleSearch(e.target.value);},className:\"search-input\"})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"genre-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"Genres\"}),/*#__PURE__*/_jsx(\"div\",{className:\"genre-grid\",children:genres.map(g=>/*#__PURE__*/_jsx(GenreCard,{genre:g,image:\"https://source.unsplash.com/160x100/?\".concat(g),onClick:()=>handleGenreClick(g)},g))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-section\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:searchQuery?\"Search Results for \\\"\".concat(searchQuery,\"\\\"\"):'Tracks'}),/*#__PURE__*/_jsx(\"div\",{className:\"track-grid\",children:tracks.map(t=>/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setSelectedTrack(t),className:\"track-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:t.album_image,alt:t.name,className:\"track-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"track-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"track-name\",children:t.name}),/*#__PURE__*/_jsx(\"p\",{className:\"track-artist\",children:t.artist_name})]})]},t.id))}),tracks.length===0&&searchQuery&&/*#__PURE__*/_jsxs(\"div\",{className:\"no-results\",children:[\"No tracks found for \\\"\",searchQuery,\"\\\"\"]})]})]})]}),/*#__PURE__*/_jsx(AudioPlayer,{track:selectedTrack})]});};export default Search;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","GenreCard","AudioPlayer","getTracksByGenre","searchTracks","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","genres","Search","tracks","setTracks","selectedTrack","setSelectedTrack","searchQuery","setSearchQuery","isLoading","setIsLoading","error","setError","location","navigate","handleSearch","query","trim","result","message","handleGenreClick","genre","URLSearchParams","search","get","className","children","type","placeholder","value","onChange","e","target","map","g","image","concat","onClick","t","src","album_image","alt","name","artist_name","id","length","track"],"sources":["C:/Users/iciyhniw/WebstormProjects/TeamProject3/jamendo-player/src/pages/Search.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport GenreCard from '../components/GenreCard';\r\nimport AudioPlayer from '../components/AudioPlayer';\r\nimport { getTracksByGenre, searchTracks } from '../api';\r\nimport '../styles/Search.css';\r\n\r\nconst genres = [\"pop\", \"rock\", \"jazz\", \"hiphop\", \"electronic\", \"classical\", \"reggae\"];\r\n\r\nconst Search = () => {\r\n    const [tracks, setTracks] = useState([]);\r\n    const [selectedTrack, setSelectedTrack] = useState(null);\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const location = useLocation();\r\n    const navigate = useNavigate();\r\n\r\n    const handleSearch = async (query) => {\r\n        if (!query.trim()) {\r\n            setTracks([]);\r\n            return;\r\n        }\r\n\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const result = await searchTracks(query);\r\n            setTracks(result);\r\n        } catch (error) {\r\n            setError('Failed to search tracks: ' + error.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleGenreClick = async (genre) => {\r\n        setIsLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const result = await getTracksByGenre(genre);\r\n            setTracks(result);\r\n        } catch (error) {\r\n            setError('Failed to fetch tracks: ' + error.message);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const query = new URLSearchParams(location.search).get('query');\r\n        if (query) {\r\n            setSearchQuery(query);\r\n            handleSearch(query);\r\n        }\r\n    }, [location]);\r\n\r\n    return (\r\n        <div className=\"search-page with-audio-player\">\r\n            <div className=\"search-container\">\r\n                <div className=\"search-header\">\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Search for songs, artists...\"\r\n                        value={searchQuery}\r\n                        onChange={(e) => {\r\n                            setSearchQuery(e.target.value);\r\n                            handleSearch(e.target.value);\r\n                        }}\r\n                        className=\"search-input\"\r\n                    />\r\n                </div>\r\n\r\n                {error && <div className=\"error-message\">{error}</div>}\r\n\r\n                {isLoading ? (\r\n                    <div className=\"loading-spinner\"></div>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"genre-section\">\r\n                            <h2 className=\"section-title\">Genres</h2>\r\n                            <div className=\"genre-grid\">\r\n                                {genres.map((g) => (\r\n                                    <GenreCard\r\n                                        key={g}\r\n                                        genre={g}\r\n                                        image={`https://source.unsplash.com/160x100/?${g}`}\r\n                                        onClick={() => handleGenreClick(g)}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"track-section\">\r\n                            <h2 className=\"section-title\">\r\n                                {searchQuery ? `Search Results for \"${searchQuery}\"` : 'Tracks'}\r\n                            </h2>\r\n                            <div className=\"track-grid\">\r\n                                {tracks.map((t) => (\r\n                                    <div \r\n                                        key={t.id} \r\n                                        onClick={() => setSelectedTrack(t)} \r\n                                        className=\"track-card\"\r\n                                    >\r\n                                        <img src={t.album_image} alt={t.name} className=\"track-image\" />\r\n                                        <div className=\"track-info\">\r\n                                            <p className=\"track-name\">{t.name}</p>\r\n                                            <p className=\"track-artist\">{t.artist_name}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            {tracks.length === 0 && searchQuery && (\r\n                                <div className=\"no-results\">\r\n                                    No tracks found for \"{searchQuery}\"\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                )}\r\n            </div>\r\n            <AudioPlayer track={selectedTrack} />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Search;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}